<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>تسجيل الدخول - صلالة الشرقية</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="firebase-config.js"></script>
<style>
body{ font-family:Arial; text-align:center; background:#f0f4f5; }
.container{ margin:50px auto; padding:20px; max-width:400px; background:white; border-radius:12px; box-shadow:0 0 15px rgba(0,0,0,0.1); }
input, button{ width:90%; padding:12px; margin:10px 0; font-size:16px; border-radius:6px; }
button{ background:#00796b; color:white; border:none; cursor:pointer; }
button:hover{ background:#004d40; }
</style>
</head>
<body>

<div class="container">
<h2>تسجيل الدخول / التسجيل</h2>
<input type="text" id="phone" placeholder="رقم الهاتف">
<input type="password" id="password" placeholder="كلمة المرور">
<button id="loginBtn">دخول</button>
<button id="registerBtn">تسجيل لأول مرة</button>
<p id="message" style="color:red;"></p>
</div>

<script>
const loginBtn = document.getElementById("loginBtn");
const registerBtn = document.getElementById("registerBtn");
const message = document.getElementById("message");

auth.onAuthStateChanged(user=>{
    if(user){ window.location="index.html"; }
});

registerBtn.addEventListener("click", ()=>{
    const phone = document.getElementById("phone").value.trim();
    const password = document.getElementById("password").value.trim();
    if(!phone || !password){ message.textContent="الرجاء إدخال رقم الهاتف وكلمة المرور"; return; }

    auth.createUserWithEmailAndPassword(phone+"@dummy.com", password)
    .then(userCredential=>{
        auth.onAuthStateChanged(user=>{
            if(user){ window.location="index.html"; }
        });
    })
    .catch(error=> message.textContent=error.message);
});

loginBtn.addEventListener("click", ()=>{
    const phone = document.getElementById("phone").value.trim();
    const password = document.getElementById("password").value.trim();
    if(!phone || !password){ message.textContent="الرجاء إدخال رقم الهاتف وكلمة المرور"; return; }

    auth.signInWithEmailAndPassword(phone+"@dummy.com", password)
    .then(userCredential=> window.location="index.html")
    .catch(error=> message.textContent=error.message);
});
</script>

</body>
</html>
